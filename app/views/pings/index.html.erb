<div class="pingsafe-mobile-wrapper">

  <div class="pingsafe-pings-container">

    <div class="pingsafe-pings-header">
      <h1 class="pingsafe-pings-title">My Pings</h1>
      <%= link_to new_ping_path, class: 'pingsafe-btn-create' do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        <span>New Ping</span>
      <% end %>
    </div>

    <% if @pings.any? %>
      <div class="pingsafe-pings-grid">
        <% @pings.order(created_at: :desc).each do |ping| %>
          <%= link_to ping_path(ping), class: 'pingsafe-ping-card' do %>

            <div class="pingsafe-ping-card-header">
              <div class="pingsafe-ping-date">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span><%= ping.date.strftime("%d %b %Y") if ping.date %></span>
              </div>

              <% if ping.chat.present? %>
                <span class="pingsafe-ping-badge pingsafe-badge-success">
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  Analyzed
                </span>
              <% elsif ping.photo.present? %>
                <span class="pingsafe-ping-badge pingsafe-badge-warning">
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                  </svg>
                  Processing
                </span>
              <% else %>
                <span class="pingsafe-ping-badge pingsafe-badge-secondary">No Photo</span>
              <% end %>
            </div>

            <div class="pingsafe-ping-info">
              <div class="pingsafe-ping-info-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
                <span><%= ping.heure.strftime("%H:%M") if ping.heure %></span>
              </div>

              <div class="pingsafe-ping-info-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
                <span><%= ping.formatted_address %></span>
              </div>
            </div>

            <div class="pingsafe-ping-footer">
              <span class="pingsafe-ping-view">View Details</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"/>
              </svg>
            </div>

          <% end %>
        <% end %>
      </div>

    <% else %>
      <div class="pingsafe-pings-empty">
        <div class="pingsafe-empty-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
        </div>
        <h3 class="pingsafe-empty-title">No pings yet</h3>
        <p class="pingsafe-empty-text">Start by creating your first ping! Click "New Ping" to get started.</p>
        <%= link_to new_ping_path, class: 'pingsafe-empty-btn' do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Create First Ping
        <% end %>
      </div>
    <% end %>

  </div>

  <div class="pingsafe-footer" data-map-footer-target="footer">
    <%= render "shared/footer" %>
  </div>
</div>

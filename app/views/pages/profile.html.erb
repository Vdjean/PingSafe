<div class="pingsafe-mobile-wrapper">
  <div class="pingsafe-profile-container">

    <div class="pingsafe-profile-header">
      <div class="pingsafe-profile-avatar">
        <% if current_user.pseudo.present? %>
          <div class="pingsafe-avatar-initials">
            <%= current_user.pseudo.first.upcase %>
          </div>
        <% elsif current_user.first_name.present? %>
          <div class="pingsafe-avatar-initials">
            <%= current_user.first_name.first.upcase %>
          </div>
        <% else %>
          <%= image_tag 'logo.png', alt: 'Profile', class: 'pingsafe-avatar-img' %>
        <% end %>
      </div>

      <h2 class="pingsafe-profile-name">
        <% if current_user.pseudo.present? %>
          <%= current_user.pseudo %>
        <% elsif current_user.first_name.present? && current_user.last_name.present? %>
          <%= "#{current_user.first_name} #{current_user.last_name}" %>
        <% elsif current_user.first_name.present? %>
          <%= current_user.first_name %>
        <% else %>
          PingSafe User
        <% end %>
      </h2>

      <p class="pingsafe-profile-email"><%= current_user.email %></p>

      <% if current_user.score.present? %>
        <div class="pingsafe-profile-score-badge">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
          <span><%= current_user.score %> points</span>
        </div>
      <% end %>
    </div>

    <div class="pingsafe-profile-menu">

      <%= link_to pings_path, class: 'pingsafe-profile-item' do %>
        <div class="pingsafe-profile-item-content">
          <div class="pingsafe-profile-item-icon pingsafe-profile-icon-pings">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
          </div>
          <span class="pingsafe-profile-item-text">Pings</span>
        </div>
        <svg class="pingsafe-profile-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      <% end %>

      <%= link_to '#', class: 'pingsafe-profile-item' do %>
        <div class="pingsafe-profile-item-content">
          <div class="pingsafe-profile-item-icon pingsafe-profile-icon-score">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
          </div>
          <span class="pingsafe-profile-item-text">Score</span>
        </div>
        <svg class="pingsafe-profile-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      <% end %>

      <%= link_to '#', class: 'pingsafe-profile-item' do %>
        <div class="pingsafe-profile-item-content">
          <div class="pingsafe-profile-item-icon pingsafe-profile-icon-partners">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <span class="pingsafe-profile-item-text">Partners</span>
        </div>
        <svg class="pingsafe-profile-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      <% end %>

      <%= link_to '#', class: 'pingsafe-profile-item' do %>
        <div class="pingsafe-profile-item-content">
          <div class="pingsafe-profile-item-icon pingsafe-profile-icon-share">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="18" cy="5" r="3"/>
              <circle cx="6" cy="12" r="3"/>
              <circle cx="18" cy="19" r="3"/>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
            </svg>
          </div>
          <span class="pingsafe-profile-item-text">Share</span>
        </div>
        <svg class="pingsafe-profile-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      <% end %>

    </div>

    <div class="pingsafe-profile-logout-section">
    <%= button_to destroy_user_session_path, method: :delete, class: 'pingsafe-profile-logout', data: { turbo: false } do %>        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        <span>Logout</span>
      <% end %>
    </div>

  </div>

  <div class="pingsafe-footer" data-map-footer-target="footer">
    <%= render "shared/footer2" %>
  </div>
</div>
